(this["webpackJsonpface-app"]=this["webpackJsonpface-app"]||[]).push([[0],{18:function(e,t,n){"use strict";n.d(t,"F",(function(){return r})),n.d(t,"E",(function(){return a})),n.d(t,"s",(function(){return c})),n.d(t,"r",(function(){return u})),n.d(t,"u",(function(){return s})),n.d(t,"t",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"G",(function(){return f})),n.d(t,"v",(function(){return p})),n.d(t,"a",(function(){return l})),n.d(t,"j",(function(){return d})),n.d(t,"C",(function(){return m})),n.d(t,"g",(function(){return h})),n.d(t,"H",(function(){return b})),n.d(t,"x",(function(){return g})),n.d(t,"p",(function(){return v})),n.d(t,"l",(function(){return w})),n.d(t,"q",(function(){return x})),n.d(t,"D",(function(){return k})),n.d(t,"c",(function(){return j})),n.d(t,"i",(function(){return E})),n.d(t,"k",(function(){return y})),n.d(t,"y",(function(){return S})),n.d(t,"w",(function(){return O})),n.d(t,"B",(function(){return T})),n.d(t,"m",(function(){return C})),n.d(t,"f",(function(){return I})),n.d(t,"e",(function(){return B})),n.d(t,"d",(function(){return F})),n.d(t,"n",(function(){return L})),n.d(t,"z",(function(){return R})),n.d(t,"A",(function(){return D})),n.d(t,"o",(function(){return N})),n.d(t,"h",(function(){return A}));var r="Turn webcam on",a="Turn webcam off",c="Process",u="Processing",s="Register",o="Registering",i="webcam",f="webcam",p="registerFace",l="analyzeImage",d="Error loading TensorFlow",m="wasm",h="cpu",b="webgl",g="server",v=.6,w=96,x="./models/",k="./wasm/",j="/Face-App?backend=",E="Error loading Faceapi: ",y="labeledFaceDescriptors",S="https://face-app-server.herokuapp.com/",O="resultContainer",T="resultVideo",C="resultImage",I="resultCanvas",B="success",F="danger",L="/data/",R="START TEST",D="STOP TEST",N=".jpg",A=13233},204:function(e,t,n){e.exports=n(257)},209:function(e,t,n){},221:function(e,t){},222:function(e,t){},223:function(e,t){},224:function(e,t){},230:function(e,t,n){"use strict";n.r(t),n.d(t,"recognize",(function(){return l}));var r=n(0),a=n.n(r),c=n(5),u=n(127),s=n.n(u),o=n(18),i=n(28),f=!1,p=s()(o.y);p.on("connect",(function(){var e=i.f(o.k);p.emit("sendDescriptors",JSON.stringify(e))}));var l=function(e,t){if(!f){f=!0;var n=Math.round(performance.now());p.emit("recognize",{base64image:e,initialTime:n},function(){var e=Object(c.a)(a.a.mark((function e(n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=!1,!n.success){e.next=10;break}return r=document.createElement("canvas"),e.next=5,i.c(n.base64canvas);case 5:return c=e.sent,r.getContext("2d").drawImage(c,0,0),i.j({canvas:r,image:c}),t(Math.round(performance.now())-n.initialTime),e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},257:function(e,t,n){"use strict";n.r(t);var r,a,c=n(10),u=n.n(c),s=n(45),o=n.n(s),i=(n(209),n(0)),f=n.n(i),p=n(5),l=n(3),d=n(9),m=n(11),h=n(12),b=(n(211),n(13)),g=n(265),v=n(120),w=n(262),x=n(18),k=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).handleSubjectLabelUpdate=function(t){e.setState({subjectLabel:t.target.value})},e.handleSubjectImagesUpdate=function(t){var n=[];Object(b.a)(t.target.files).forEach((function(e){var t=URL.createObjectURL(e);n.push(t)})),e.setState({subjectImages:n})},e.handleRegisterSubjectSubmit=function(){var t=Object(p.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),e.setState({showSpinner:!0,buttonText:x.t}),r=[],e.state.subjectImages.forEach((function(e){var t=document.createElement("img");t.src=e,r.push(t)})),t.next=6,e.props.registerSubject(e.state.subjectLabel,r);case 6:e.setState({showSpinner:!1,buttonText:x.u});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={showSpinner:!1,buttonText:x.u},e}return Object(d.a)(n,[{key:"render",value:function(){return u.a.createElement(g.a,{id:"registerSubjectForm",onSubmit:this.handleRegisterSubjectSubmit},u.a.createElement(g.a.Group,null,u.a.createElement(g.a.Control,{type:"text",placeholder:"Name",onChange:this.handleSubjectLabelUpdate})),u.a.createElement(g.a.Group,null,u.a.createElement(g.a.File,{id:"subjectImages",label:"Images of subject",onChange:this.handleSubjectImagesUpdate,custom:!0,multiple:!0})),u.a.createElement(g.a.Group,null,u.a.createElement(v.a,{id:"subjectImagesSubmit",type:"submit"},this.state.buttonText+" ",u.a.createElement(w.a,{animation:"border",size:"sm",hidden:!this.state.showSpinner}))))}}]),n}(u.a.Component),j=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).handleProcessImageSubmit=function(){var t=Object(p.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),e.setState({showSpinner:!0,processImageButtonText:x.r}),(r=document.createElement("img")).src=e.state.imageUrl,t.next=6,e.props.recognizeFaces({media:r,isImage:!0});case 6:e.setState({showSpinner:!1,processImageButtonText:x.s});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleImageUpdate=function(){var t=Object(p.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e.setState({imageUrl:URL.createObjectURL(n.target.files[0])});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.changeWebcamState=function(){var t=!e.state.showWebcam;e.props.changeWebcamState(t),e.setState({showWebcam:t,webcamButtonText:t?x.E:x.F,webcamButtonVariant:t?x.d:x.e})},e.state={showSpinner:!1,showWebcam:!1,processImageButtonText:x.s,webcamButtonText:x.F,webcamButtonVariant:x.e},e}return Object(d.a)(n,[{key:"render",value:function(){return u.a.createElement(g.a,{id:"analyzeImageForm",onSubmit:this.handleProcessImageSubmit},u.a.createElement(g.a.Group,null,u.a.createElement(g.a.File,{type:"file",id:"processImage",label:"Image to process",onChange:this.handleImageUpdate,custom:!0})),u.a.createElement(g.a.Group,null,u.a.createElement(v.a,{id:"processImageSubmit",type:"submit",disabled:this.state.showWebcam},this.state.processImageButtonText+" ",u.a.createElement(w.a,{animation:"border",size:"sm",hidden:!this.state.showSpinner}))))}}]),n}(u.a.Component),E=n(30),y=n(267),S=n(28),O=x.n,T=x.o,C=x.h,I=x.d,B=x.e,F=x.z,L=x.A,R=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).downloadNewImage=Object(p.a)(f.a.mark((function t(){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.running){t.next=2;break}return t.abrupt("return");case 2:if(!(e.state.imageCount>=C)){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.getNextImageURL();case 6:return n=t.sent,t.next=9,S.d(n);case 9:return r=t.sent,t.next=12,e.props.generateLandmarks(r);case 12:return t.next=14,e.downloadNewImage();case 14:case"end":return t.stop()}}),t)}))),e.startStopTest=Object(p.a)(f.a.mark((function t(){var n,r,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.updateImageCount(),n=I,r=L,a=!0,e.state.running&&(n=B,r=F,a=!1),e.setState({buttonLabel:r,buttonVariant:n,running:a},(function(){return e.downloadNewImage()}));case 6:case"end":return t.stop()}}),t)}))),e.getNextImageURL=function(){S.i();var t=e.state.timeCount+1;return e.setState({timeCount:t,progress:Math.round(t/C*100)}),"https://www.pabloescriva.com/Face-App"+O+t+T},e.state={progress:0,running:!1,buttonVariant:B,buttonLabel:F},e.startStopTest=e.startStopTest.bind(Object(E.a)(e)),e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.updateImageCount(),S.i()}},{key:"updateImageCount",value:function(){this.setState({timeCount:S.e().length})}},{key:"render",value:function(){return u.a.createElement("div",{className:"center"},u.a.createElement("div",{className:"autotest-buttons"},u.a.createElement(v.a,{variant:this.state.buttonVariant,onClick:this.startStopTest},this.state.buttonLabel)," ",u.a.createElement(v.a,{variant:"info",onClick:S.a,disabled:this.state.running},"CLEAR RESULTS")," "),u.a.createElement(y.a,{className:"progressBar",now:this.state.progress,label:"".concat(this.state.progress,"%")}))}}]),n}(u.a.Component),D=0,N=function(e){D+=e,a++},A=function(){return Math.round(D/a)},U=function(e){return Math.round(1e3/e)},z=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).componentDidMount=function(){e.startWebcam()},e.startWebcam=Object(p.a)(f.a.mark((function t(){var n,c,u;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={video:{height:{exact:300},width:{exact:300},mediaSource:"camera"}},t.next=3,navigator.mediaDevices.getUserMedia(n);case 3:if(c=t.sent,u=document.getElementById(x.B)){t.next=7;break}return t.abrupt("return");case 7:u.onloadeddata=e.onPlay,u.srcObject=c,r=0,a=0,D=0,e.setState({video:u});case 11:case"end":return t.stop()}}),t)}))),e.componentWillUnmount=function(){S.b(),e.setState=function(e,t){}},e.onPlay=Object(p.a)(f.a.mark((function t(){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.video.paused&&!e.state.video.ended){t.next=2;break}return t.abrupt("return",setTimeout((function(){return e.onPlay()})));case 2:return(n=document.createElement("canvas")).width=e.state.video.videoWidth,n.height=e.state.video.videoHeight,n.getContext("2d").drawImage(e.state.video,0,0),r=n.toDataURL("image/png"),t.next=9,e.props.recognizeFaces(r);case 9:setTimeout((function(){return e.onPlay()}),100);case 10:case"end":return t.stop()}}),t)}))),e.render=function(){return null},e.state={video:!1},e}return n}(u.a.Component),W=n(266),M=n(263),P=n(130),G=n(264);var J=function(e){return window.location.origin+x.c+e},V=function(e){return u.a.createElement(W.a,{bg:"dark",variant:"dark"},u.a.createElement(W.a.Brand,null,"Face App"),u.a.createElement(M.a,{title:"Tools",disabled:!0},u.a.createElement(P.a.Item,{onClick:function(){return e.changeCurrentTool(x.b)}},"AutoTest"),u.a.createElement(P.a.Item,{onClick:function(){return e.changeCurrentTool(x.G)}},"Webcam"),u.a.createElement(P.a.Item,{onClick:function(){return e.changeCurrentTool(x.v)},disabled:e.tfBackend===x.x},"Register face"),u.a.createElement(P.a.Item,{onClick:function(){return e.changeCurrentTool(x.a)},disabled:"true"},"Analyze image")),u.a.createElement(W.a.Collapse,{className:"justify-content-end"},u.a.createElement(G.a,{size:"sm",className:"mb-2"},u.a.createElement(v.a,{href:J(x.H),disabled:e.tfBackend===x.H},"webgl"),u.a.createElement(v.a,{href:J(x.g),disabled:e.tfBackend===x.g},"cpu"),u.a.createElement(v.a,{href:J(x.C),disabled:e.tfBackend===x.C},"wasm"),u.a.createElement(v.a,{href:J(x.x),disabled:e.tfBackend===x.x},"server"))))};var H=function(e){return u.a.createElement("div",{id:x.w},u.a.createElement("img",{id:x.m,alt:""}),u.a.createElement("video",{id:x.B,autoPlay:!0,playsInline:!0,muted:!0}),u.a.createElement("canvas",{id:x.f}))},q=n(128),_=n(27),K={inputSize:x.l},Q=[];function X(){return(X=Object(p.a)(f.a.mark((function e(){var t,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:x.H,e.next=3,Object(q.a)(x.D);case 3:return e.next=5,_.n.setBackend(t);case 5:return e.next=7,_.n.ready();case 7:return e.abrupt("return",_.n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe();case 2:return e.abrupt("return",Promise.all([_.k(x.q),_.i(x.q),_.j(x.q)]).catch((function(e){return console.error(x.i,e)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return $.apply(this,arguments)}function $(){return($=Object(p.a)(f.a.mark((function e(t){var n,r,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.c(t);case 2:return t=e.sent,e.next=5,_.d(t);case 5:return e.next=7,_.e(t);case 7:return n=e.sent,e.next=10,_.l(n,t);case 10:return r=e.sent,e.next=13,ae(t);case 13:if(0!==(a=e.sent).length){e.next=16;break}return e.abrupt("return",!1);case 16:return e.next=18,_.m(a,r);case 18:if(c=e.sent,!(Q.length>0)){e.next=24;break}return e.next=22,de(c,n);case 22:e.next=26;break;case 24:return e.next=26,le(c,n);case 26:return S.j({canvas:n}),e.abrupt("return",!0);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.c(t);case 3:return t=e.sent,e.next=6,_.d(t);case 6:return n=Date.now(),e.next=9,ae(t);case 9:if(0!==e.sent.length){e.next=12;break}return e.abrupt("return",{result:!1,time:Date.now()-n});case 12:return e.abrupt("return",{result:!0,time:Date.now()-n});case 15:return e.prev=15,e.t0=e.catch(0),console.log("Could not process image:"+e.t0),e.abrupt("return",{result:!1});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function ne(e,t){return re.apply(this,arguments)}function re(){return(re=Object(p.a)(f.a.mark((function e(t,n){var r,a,c,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=0;case 2:if(!(a<n.length)){e.next=12;break}return e.next=5,_.d(n[a]);case 5:return e.next=7,ue(n[a]);case 7:c=e.sent,r.push(c.descriptor);case 9:a++,e.next=2;break;case 12:return e.next=14,new _.b(t,r);case 14:u=e.sent,Q.push(u),S.h(Q);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.f(t,new _.c(K)).withFaceLandmarks(!0).withFaceDescriptors();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){return se.apply(this,arguments)}function se(){return(se=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.g(t,new _.c(K)).withFaceLandmarks(!0).withFaceDescriptor();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return ie.apply(this,arguments)}function ie(){return(ie=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.f(x.k);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:t.map(function(){var e=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=_.b,e.t1=t.label,e.next=4,t.descriptors.map((function(e){return Float32Array.from(e)}));case 4:e.t2=e.sent,n=new e.t0(e.t1,e.t2),Q.push(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new _.a(Q,x.p),e.abrupt("return",t.map((function(e){return n.findBestMatch(e.descriptor)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e,t){_.h.drawDetections(t,e),_.h.drawFaceLandmarks(t,e)}function de(e,t){return me.apply(this,arguments)}function me(){return(me=Object(p.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(t);case 2:e.sent.forEach((function(e,r){var a=t[r].detection.box,c=e.toString();new _.h.DrawBox(a,{label:c}).draw(n)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var he,be=S.g(),ge=function(e){Object(m.a)(c,e);var t=Object(h.a)(c);function c(){var e;return Object(l.a)(this,c),(e=t.call(this)).loadFaceApi=function(){(function(){return X.apply(this,arguments)})(be).then((function(t){return e.setState({tensorflowReady:!0,tfBackend:t.getBackend()})})).then((function(){return function(){return Y.apply(this,arguments)}()})).then((function(){return e.setState({faceApiReady:!0})})).catch((function(e){return console.error(x.j,e)}))},e.updateTimeStats=function(t){var n=function(e){if(0===a)return r=e,void a++;N(e);var t=A(),n=U(t);return{newTime:e,firstFrame:r,averageTime:t,fps:n}}(t);e.setState({stats:n})},e.registerSubject=function(){var e=Object(p.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.recognizeFaces=function(){var t=Object(p.a)(f.a.mark((function t(n){var r,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Date.now(),a=!1,be!==x.x){t.next=8;break}return t.next=5,he.recognize(n,e.updateTimeStats);case 5:a=t.sent,t.next=11;break;case 8:return t.next=10,Z(n);case 10:a=t.sent;case 11:a&&e.updateTimeStats(Date.now()-r);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.generateLandmarks=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t);case 2:n=e.sent,r=n.result,a=n.time,r&&S.k(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.changeCurrentTool=function(t){S.b(),e.setState({currentTool:t,stats:null})},e.getStatsText=function(){if(e.state.stats)return"First Frame: ".concat(e.state.stats.firstFrame," ms")+" | Average Time: ".concat(e.state.stats.averageTime," ms")+" | New Time: ".concat(e.state.stats.newTime," ms")+" | ".concat(e.state.stats.fps," fps")},e.getCurrentTool=function(){switch(e.state.currentTool){case x.b:return u.a.createElement(R,{generateLandmarks:e.generateLandmarks,changeWebcamState:e.changeWebcamState});case x.G:return u.a.createElement(z,{recognizeFaces:e.recognizeFaces});case x.v:return u.a.createElement(k,{registerSubject:e.registerSubject});case x.a:return u.a.createElement(j,{recognizeFaces:e.recognizeFaces,changeWebcamState:e.changeWebcamState})}},e.state={tensorflowReady:!1,faceApiReady:!1,currentTool:x.G},e}return Object(d.a)(c,[{key:"componentDidMount",value:function(){be===x.x?he=n(230):this.loadFaceApi()}},{key:"render",value:function(){return this.state.tensorflowReady||be===x.x?this.state.faceApiReady||be===x.x?u.a.createElement("div",{className:"App"},u.a.createElement(V,{changeCurrentTool:this.changeCurrentTool,tfBackend:this.state.tfBackend||be}),u.a.createElement("div",{className:"center"},this.getCurrentTool()),u.a.createElement(H,null),u.a.createElement("p",{className:"stats"},this.getStatsText())):u.a.createElement("p",null,"Loading FaceApi..."):u.a.createElement("p",null,"Loading TensorFlow...")}}]),c}(u.a.Component);o.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(ge,null)),document.getElementById("root"))},28:function(e,t,n){"use strict";n.d(t,"g",(function(){return p})),n.d(t,"f",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"j",(function(){return b})),n.d(t,"d",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return w})),n.d(t,"e",(function(){return x})),n.d(t,"a",(function(){return j})),n.d(t,"i",(function(){return E})),n.d(t,"k",(function(){return y}));var r=n(1),a=n(0),c=n.n(a),u=n(5),s=n(18),o=n(101),i=n.n(o),f=new URLSearchParams(window.location.search).get("backend")||"webgl",p=function(){return f},l=function(e){return JSON.parse(localStorage.getItem(e))};function d(e){return m.apply(this,arguments)}function m(){return(m=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",localStorage.setItem(s.k,JSON.stringify(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.getElementById(s.w).replaceChildren(I(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,r,a,u,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.image,r=t.canvas,a=document.getElementById(s.w),u=document.getElementById(s.f),o=document.getElementById(s.m),r&&(r.id=s.f,a.replaceChild(r,u)),n&&(n.id=o.id,a.replaceChild(n,o));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=document.createElement("img")).src=t,n.crossOrigin="anonymous",e.prev=3,e.next=6,n.decode();case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(3),console.error(e.t0),e.abrupt("return");case 12:return(r=document.createElement("canvas")).width=n.width,r.height=n.height,r.getContext("2d").drawImage(n,0,0),e.abrupt("return",r.toDataURL("image/png"));case 17:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){S(),T(),O()},w=function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new Image).src=t,n.width=t.width||300,n.height=t.height||300,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){return l(f+"_times")||[]},k=function(e){var t,n;t="".concat(f,"_times"),n=e,localStorage.setItem(t,JSON.stringify(n))},j=function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k([]),E();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=x();h(C(e),f)},y=function(e){var t=x();t||(t=[]),t.push(e),k(t)},S=function(){var e=document.getElementById(s.m);e&&(e.src="//:0")},O=function(){var e=document.getElementById(s.f);e&&e.getContext("2d").clearRect(0,0,e.width,e.height)},T=function(){var e=document.getElementById(s.B);e&&(e.srcObject=null)},C=function(e){var t={};return t.Backend=f,t["Total images"]=e.length,t["First image"]="".concat(e[0]," ms"),e.shift(),t.Average="".concat(Math.round(100*i.a.mean(e))/100," ms"),t.Stdev="".concat(Math.round(100*i.a.stdev(e))/100," ms"),t},I=function(e){var t=document.createElement("table");return t.setAttribute("border","2"),Object.entries(e).forEach((function(e){var n=Object(r.a)(e,2),a=n[0],c=n[1],u=document.createElement("tr"),s=document.createElement("td"),o=document.createElement("td");s.appendChild(document.createTextNode(a)),o.appendChild(document.createTextNode(c)),u.appendChild(s),u.appendChild(o),t.appendChild(u)})),t}},62:function(e,t){},94:function(e,t){}},[[204,1,2]]]);
//# sourceMappingURL=main.487d6ff9.chunk.js.map